<div class="terminal">

    <section class="intro-section">
      <h1>ğŸ§© Comptes tiers</h1>
      <p>
        Les comptes tiers vous permettent de gÃ©rer les souhaits dâ€™un enfant, dâ€™un proche ou de toute personne que vous accompagnez â€” sans quâ€™elle ait besoin dâ€™utiliser lâ€™application elle-mÃªme.
      </p>
      <p>
        âœ¨ Câ€™est lâ€™idÃ©al, par exemple, pour prÃ©parer les surprises des plus jeunes membres de la famille, ou simplifier lâ€™organisation pour une personne moins Ã  lâ€™aise avec les outils numÃ©riques.
      </p>
      <p class="emphase-douce">
        âš ï¸ <strong>Ã€ savoir :</strong> ces comptes disposent de droits limitÃ©s. Vous pouvez leur crÃ©er une liste de cadeaux, mais vous ne pourrez pas prendre ou rÃ©server un cadeau en leur nom.
      </p>
    </section>


  <section class="actions">
    <hr class="block-separator" />
    <div class="block-title">ğŸ‘­ CrÃ©er un compte tiers </div>
    <hr class="block-separator" />
    <div class="sebou-alert">
      <span class="intro">
        <em>Le prÃ©nom et le nom du compte tiers seront partagÃ©s entre tous les groupes oÃ¹ il sera ajoutÃ©.</em>
      </span>
      <span class="middle">
        En revanche, vous pouvez personnaliser un surnom spÃ©cifique Ã  chaque groupe â€” y compris celui-ci.
      </span>
      <span class="final">
        Câ€™est le moment idÃ©al pour dÃ©finir ce surnom dans le groupe actif.
      </span>
    </div>

    <div class="login-form">
      <label for="givenName">PrÃ©nom</label>
      <input
        id="givenName"
        [(ngModel)]="givenName"
        type="text"
        required
        autocomplete="off"
      />

      <label for="familyName">Nom</label>
      <input
        id="familyName"
        [(ngModel)]="familyName"
        type="text"
        autocomplete="off"
      />

      <label for="nickname">Surnom</label>
      <input
        id="nickname"
        [(ngModel)]="nickname"
        type="text"
        autocomplete="off"
      />
    </div>

    <button class="button-bloc" type="button" (click)="goToCreateCompteTiers()">â• CrÃ©er un nouveau compte tiers</button>
  </section>

  <section class="liste-comptes" aria-live="polite">
    <hr class="block-separator" />
    <div class="block-title">ğŸ“‹ Comptes actuellement gÃ©rÃ©s</div>
    <hr class="block-separator" />
    <ul *ngIf="managedAccounts().length > 0; else noAccounts">
      <li *ngFor="let account of managedAccounts(); let i = index" class="compte-tiers-bloc">
        <div class="nom-tiers">
            <span class="emoji">
              {{ i % 2 === 0 ? 'ğŸ’¿' : 'ğŸ“€' }}
            </span>
          <strong>{{ account.prenom }} {{ account.nom || '' }}</strong>
        </div>
        <div class="act">
          <p><button type="button" (click)="switchToAccount(account.id)">ğŸ­ Se connecter en tant que</button></p>
          <p><button type="button" (click)="addToAnotherGroup(account.id)">ğŸ“¤ Ajouter Ã  un autre groupe</button></p>
          <p><button type="button"  (click)="deleteFromGroup(account.id)">ğŸ—‘ï¸ Supprimer du groupe</button></p>
          <p><button type="button"  (click)="deleteGlobally(account.id)">âŒ Supprimer dÃ©finitivement</button></p>
        </div>
      </li>

    </ul>

    <ng-template #noAccounts>
      <p>Vous ne gÃ©rez actuellement aucun compte tiers.</p>
    </ng-template>
  </section>

  <div class="options">
    <button data-allow-tiers (click)="return()">â†© Retour au Menu</button>
  </div>
</div>

<app-terminal-modal
  *ngIf="showModal"
  [message]="message"
  [actions]="modalActions"
  (actionClicked)="handleClicked($event)"
/>

<app-terminal-modal
  *ngIf="errorService.errorMessage()"
  [message]="errorService.errorMessage()!"
  [actions]="[{ label: 'Ok', eventName: 'CLOSE', style: 'danger' }]"
  (actionClicked)="errorService.clearError()"
></app-terminal-modal>

<ng-container *ngIf="showExportUser">
  <div class="modal-overlay">
    <div
      class="modal-box terminal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title">

      <h2 id="modal-title" class="visually-hidden">FenÃªtre de confirmation</h2>
      <p>A quel groupe souhaitez ajouter ce compte tiers ?</p>

      <select id="selectDest" [(ngModel)]="selectedGroupId">
        <option [ngValue]="undefined" disabled selected hidden>Choisissez un groupe</option>
        <option *ngFor="let group of groupFiltered" [value]="group.id">{{group.nomGroupe}}</option>
      </select>


      <div class="modal-actions">
        <button (click)="confirmExport()">Valider</button>
        <button (click)="cancelExport()">Annuler</button>
      </div>
    </div>
  </div>
</ng-container>

