<div class="terminal">
  <h2>> Vos idÃ©es de cadeaux</h2>

  <section class="intro-bloc" aria-label="Introduction pour la page IdÃ©es de cadeaux pour les autres">
  <p>> Enregistrez ici vos idÃ©es de cadeaux pour d'autres membres du groupe. </p>
  <p class="sub-intro">Cliquez sur votre idÃ©e pour obtenir son dÃ©tail et la gÃ©rer. </p>
  </section>


  <p class="actions-legend"> <em>> Actions rapides: ğŸ”’ Changer la visibilitÃ© | ğŸ“„ Dupliquer l'idÃ©e | ğŸ›’ Prendre le cadeau (si privÃ© et disponible) </em> </p>

  <table   aria-describedby="table-priorite-explication" class="gift-table">
    <thead>
    <tr>
      <th scope="col">Destinataire</th>
      <th scope="col">Nom</th>
      <th scope="col" class="col-actions">Prix</th>
      <th scope="col" class="col-actions">PrivÃ©</th>
      <th scope="col" class="col-actions">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let gift of giftIdeas"
        (click)="onRowClick(gift)"
        (keydown.enter)="onRowClick(gift)"
        (keydown.space)="onRowClick(gift)">
      <td tabindex="0">{{ gift.gift.destinataire.prenom }}</td>
      <td>{{ gift.gift.nom }}</td>
      <td class="col-actions">{{ gift.gift.prix }} â‚¬</td>
      <td
        class="col-actions">
        {{ gift.giftIdea.visibilite ? 'NON' : 'OUI' }}
      </td>
      <td class="emoji-action col-actions">
        <button type="button" class="emoji-button"
                title="Modifier la visibilitÃ©"
                attr.aria-label="Modifier la visibilitÃ© de {{ gift.gift.nom }}">
          <span class="emoji"
                (click)="changeVisibility(gift.giftIdea.visibilite, gift.giftIdea.id); $event.stopPropagation()">ğŸ”’</span>
        </button>
        <button type="button" class="emoji-button"
                title="Dupliquer l'idÃ©e"
                attr.aria-label="Dupliquer l'idÃ©e {{ gift.gift.nom }}">
          <span class="emoji"
                (click)="duplicateIdea(gift.giftIdea.id); $event.stopPropagation()">ğŸ“„</span>
        </button>
        <button *ngIf="!gift.giftIdea.visibilite && gift.gift.statut == 'DISPONIBLE' "
          type="button" class="emoji-button"
                title="Prendre le cadeau"
                attr.aria-label="Prendre le cadeau {{ gift.gift.nom }}">
          <span class="emoji"
                (click)="takeIt(gift.gift.id!); $event.stopPropagation()">ğŸ›’</span>
        </button>

      </td>
    </tr>
    </tbody>
  </table>

  <div class="options">
    <button (click)="goToAjout()">[+] Ajouter une idÃ©e</button>
    <button (click)="return()">â†© Retour au Menu</button>
  </div>
</div>
  <ng-container *ngIf="showDuplicationModal">
    <div class="modal-overlay">
      <div
        class="modal-box terminal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-title">

        <h2 id="modal-title" class="visually-hidden">FenÃªtre de confirmation</h2>
        <p>Pour qui souhaitez-vous dupliquer ce cadeau ?</p>

        <select id="selectDest" [(ngModel)]="selectedDestId">
          <option [ngValue]="undefined" disabled selected hidden>Choisissez un destinataire</option>
          <option *ngFor="let user of allUsers" [value]="user.id">{{ user.prenom }}</option>
        </select>


        <div class="modal-actions">
          <button (click)="confirmDuplication()">Valider</button>
          <button (click)="cancelDuplication()">Annuler</button>
        </div>
      </div>
    </div>
  </ng-container>

  <app-terminal-modal
    *ngIf="errorService.errorMessage()"
    [message]="errorService.errorMessage()!"
    [actions]="[{ label: 'Ok', eventName: 'CLOSE', style: 'danger' }]"
    (actionClicked)="errorService.clearError()"
  ></app-terminal-modal>

  <app-terminal-modal
    *ngIf="showModal"
    [message]="message"
    [actions]="modalActions"
    (actionClicked)="handleClicked($event)">
  </app-terminal-modal>

