<div class="terminal">
  <h1> Modifier votre mot de passe</h1>
  <div class="login-form">

    <div class="login-form">
      <div  *ngIf="context=='change'">
        <label for="old-password">Ancien mot de passe</label>
        <input
          id="old-password"
          name="old-password"
          [type]="showPassword() ? 'text' : 'password'"
          [(ngModel)]="oldPassword"
          spellcheck="false"
          autocomplete="current-password"
        />
      </div>
      <div>
        <label for="new-password">Nouveau mot de passe</label>
        <input
          id="new-password"
          name="new-password"
          [type]="showPassword() ? 'text' : 'password'"
          [(ngModel)]="newPassword"
          (input)="onPasswordInput()"
          (blur)="onPasswordBlur()"
          [class.error]="passwordError"
          spellcheck="false"
          autocomplete="new-password"
          required
        />
        <button
          type="button"
          class="toggle-password"
          (click)="showPassword.set(!showPassword())"
          aria-label="Afficher ou masquer le mot de passe"
        >
          {{ showPassword() ? '🙈 Masquer' : '👁 Afficher' }}
        </button>
      </div>

      <div>
        <label for="confirm-password">Confirmer le mot de passe</label>
        <input
          id="confirm-password"
          name="confirm-password"
          [type]="showPassword() ? 'text' : 'password'"
          [(ngModel)]="confirmPassword"
          (input)="onConfirmPasswordInput()"
          [class.error]="confirmError"
          spellcheck="false"
          autocomplete="new-password"
          required
        />
        <button
          type="button"
          class="toggle-password"
          (click)="showPassword.set(!showPassword())"
          aria-label="Afficher ou masquer le mot de passe"
        >
          {{ showPassword() ? '🙈 Masquer' : '👁 Afficher' }}
        </button>

        <div *ngIf="passwordError" class="form-error" role="alert" aria-live="assertive">
          {{ passwordError }}
        </div>
        <div *ngIf="confirmError" class="form-error" role="alert" aria-live="assertive">
          {{ confirmError }}
        </div>
      </div>


      <button (click)="submitPasswordChange()">💾 Modifier</button>
    </div>
  </div>
</div>

<app-feedback-test
  [composant]="composant">
</app-feedback-test>

